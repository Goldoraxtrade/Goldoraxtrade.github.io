<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GoldoraX ‡πÄ‡∏Å‡∏°‡∏ô‡πâ‡∏≥‡πÄ‡∏ï‡πâ‡∏≤‡∏õ‡∏π‡∏õ‡∏•‡∏≤</title>
<link rel="stylesheet" href="style.css">
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script src="firebase-config.js"></script>
</head>
<body>
<h1>GoldoraX ‡∏ô‡πâ‡∏≥‡πÄ‡∏ï‡πâ‡∏≤‡∏õ‡∏π‡∏õ‡∏•‡∏≤ üé≤</h1>

<div class="container">
<div class="players">
‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô: <span id="playerName">-</span> | ID: <span id="playerID">-</span> | ‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô: <span id="playerBalance">0</span> b
<button onclick="logout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
</div>

<div class="bet-section">
<p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏î‡∏¥‡∏°‡∏û‡∏±‡∏ô‡∏™‡∏±‡∏ï‡∏ß‡πå (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 3 ‡∏ï‡∏±‡∏ß):</p>
<button class="bet-btn" data-animal="üçà" onclick="toggleBet(this)">üçà ‡∏ô‡πâ‡∏≥‡πÄ‡∏ï‡πâ‡∏≤</button>
<button class="bet-btn" data-animal="ü¶Ä" onclick="toggleBet(this)">ü¶Ä ‡∏õ‡∏π</button>
<button class="bet-btn" data-animal="ü¶û" onclick="toggleBet(this)">ü¶û ‡∏Å‡∏∏‡πâ‡∏á</button>
<button class="bet-btn" data-animal="üêî" onclick="toggleBet(this)">üêî ‡πÑ‡∏Å‡πà</button>
<button class="bet-btn" data-animal="üêØ" onclick="toggleBet(this)">üêØ ‡πÄ‡∏™‡∏∑‡∏≠</button>
<button class="bet-btn" data-animal="üêü" onclick="toggleBet(this)">üêü ‡∏õ‡∏•‡∏≤</button>
</div>

<div class="dice-container">
<div id="dice1" class="dice">?</div>
<div id="dice2" class="dice">?</div>
<div id="dice3" class="dice">?</div>
</div>

<div>
<input type="number" id="betAmount" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô" min="1">
<button onclick="rollDice()" style="padding:10px 20px;font-size:1em;">‡∏ó‡∏≠‡∏¢‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤</button>
</div>

<div id="result"></div>

<div>
<button onclick="deposit()">‡∏ù‡∏≤‡∏Å‡πÄ‡∏á‡∏¥‡∏ô</button>
<button onclick="withdraw()">‡∏ñ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</button>
</div>

<audio id="winSound" src="https://freesound.org/data/previews/341/341695_62466-lq.mp3"></audio>
<audio id="loseSound" src="https://freesound.org/data/previews/109/109662_945474-lq.mp3"></audio>

<script>
let currentPlayer=null;
let selectedBets=[];

window.onload=function(){
  const playerID=localStorage.getItem("currentPlayerID");
  if(!playerID){ alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô"); window.location="login.html"; return; }
  firebase.database().ref('players/'+playerID).once('value',snap=>{
    if(snap.exists()){ currentPlayer=snap.val(); updatePlayerDisplay(); }
    else{ alert("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô"); window.location="login.html"; }
  });
}

function updatePlayerDisplay(){
  document.getElementById('playerName').innerText=currentPlayer.name;
  document.getElementById('playerID').innerText=currentPlayer.id;
  document.getElementById('playerBalance').innerText=currentPlayer.balance;
}

function logout(){ localStorage.removeItem("currentPlayerID"); window.location="login.html"; }

function toggleBet(btn){
  let animal=btn.dataset.animal;
  if(selectedBets.includes(animal)){
    selectedBets=selectedBets.filter(a=>a!==animal);
    btn.classList.remove('selected');
  }else{
    if(selectedBets.length>=3){ alert("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 3 ‡∏ï‡∏±‡∏ß"); return; }
    selectedBets.push(animal);
    btn.classList.add('selected');
  }
}

function deposit(){
  window.open("https://lin.ee/Mm1caQx","_blank");
}

function withdraw(){
  window.open("https://lin.ee/Mm1caQx","_blank");
}

function rollDice(){
  if(selectedBets.length===0){ alert("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏Å‡πà‡∏≠‡∏ô"); return; }
  let amount=parseInt(document.getElementById('betAmount').value);
  if(isNaN(amount) || amount<=0){ alert("‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"); return; }
  if(amount>currentPlayer.balance){ alert("‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠"); return; }

  let diceAnimals=["üçà","ü¶Ä","ü¶û","üêî","üêØ","üêü"];
  let results=[diceAnimals[randomLoseWin()],diceAnimals[randomLoseWin()],diceAnimals[randomLoseWin()]];

  document.getElementById('dice1').innerText=results[0];
  document.getElementById('dice2').innerText=results[1];
  document.getElementById('dice3').innerText=results[2];

  let winCount=results.filter(r=>selectedBets.includes(r)).length;
  let winAmount=winCount*amount;
  currentPlayer.balance+=winAmount-amount; // ‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å

  firebase.database().ref('players/'+currentPlayer.id+'/balance').set(currentPlayer.balance);
  updatePlayerDisplay();

  document.getElementById('result').innerText=winCount>0 ? "‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏ô‡∏∞ "+winAmount+" b!" : "‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏û‡πâ "+amount+" b!";
  if(winCount>0){ document.getElementById('winSound').play(); }
  else{ document.getElementById('loseSound').play(); }
}

function randomLoseWin(){ return Math.random()<0.3?Math.floor(Math.random()*6):Math.floor(Math.random()*6); }

</script>
</body>
</html>
